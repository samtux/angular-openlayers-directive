<!DOCTYPE html>
<html ng-app="demoapp">
<head>
  <meta charset="UTF-8"> 
  <script src="../bower_components/openlayers3/build/ol.js"></script>
  <script src="../bower_components/angular/angular.min.js"></script>
  <script src="../bower_components/angular-sanitize/angular-sanitize.min.js"></script>
  <script src="../dist/angular-openlayers-directive.js"></script>
  <link rel="stylesheet" href="../bower_components/openlayers3/build/ol.css" />
  <script>
    var app = angular.module("demoapp", ["openlayers-directive"]);
    app.controller("imageController", [ '$scope', '$http', 'olData', function($scope, $http, olData) {
      angular.extend($scope, {
        bogota: {
          lat: 4.585,
          lon: -74.13,
          zoom: 10
        },
        defaults: {
          view: {
            projection: 'EPSG:4326',
            extent: [-74.32, 4.45, -73.85, 4.85],
            maxZoom: 21,
            minZoom: 10
          }
        },
        mapa: {
          active: true,
          visible: true,          
          source: {
            type: 'TileImage',
            attribution: 'Servicio XYZ de IDECA &copy; <a href="http://ideca.gov.co/" target="_blank">IDECA Bogota</a>',
            url: "http://imagenes.catastrobogota.gov.co/arcgis/rest/services/CM/CommunityMap/MapServer/tile/{z}/{y}/{x}",
            maxExtent: [-74.900220, 3.698400, -73.347648, 4.912033],
            tileGrid: {
                    origin: [-400, 400], // top left corner of the pixel projection's extent
                    resolutions: [0.0023794610058302797, 0.0011897305029151398, 5.948652514575699E-4, 2.3794610058302794E-4, 1.1897305029151397E-4, 4.758922011660559E-5, 2.3794610058302794E-5, 1.1897305029151397E-5, 4.758922011660559E-6, 2.3794610058302796E-6, 1.1897305029151398E-6]
                  }
                }
              }
            });

} ]);
</script>
</head>
<body ng-controller="imageController">
 <openlayers ol-center="bogota" custom-layers="true"  width="100%" height="480px" ol-defaults="defaults">
  <ol-layer ol-layer-properties="mapa"></ol-layer> 
</openlayers>
<h1>TileImage XYZ example</h1>
<p>Load an cache image with XYZ schema, as the cached images in ArcGIS Server</p>

</body>
</html>
